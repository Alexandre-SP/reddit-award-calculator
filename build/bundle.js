var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function a(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function d(){return s(" ")}function f(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t,n){t.value=null==n?"":n}function m(t,n,e,r){t.style.setProperty(n,e,r?"important":"")}let g;function $(t){g=t}function y(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const w=[],b=[],x=[],C=[],_=Promise.resolve();let v=!1;function L(t){x.push(t)}let k=!1;const A=new Set;function E(){if(!k){k=!0;do{for(let t=0;t<w.length;t+=1){const n=w[t];$(n),M(n.$$)}for($(null),w.length=0;b.length;)b.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];A.has(n)||(A.add(n),n())}x.length=0}while(w.length);for(;C.length;)C.pop()();v=!1,k=!1,A.clear()}}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}const S=new Set;let j;function z(t,n){t&&t.i&&(S.delete(t),t.i(n))}function N(t,n,e,r){if(t&&t.o){if(S.has(t))return;S.add(t),j.c.push((()=>{S.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function F(t,e,a){const{fragment:c,on_mount:l,on_destroy:i,after_update:u}=t.$$;c&&c.m(e,a),L((()=>{const e=l.map(n).filter(o);i?i.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(L)}function P(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function T(t,n){-1===t.$$.dirty[0]&&(w.push(t),v||(v=!0,_.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function U(n,o,a,c,l,u,s=[-1]){const d=g;$(n);const f=o.props||{},h=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:s,skip_bound:!1};let p=!1;if(h.ctx=a?a(n,f,((t,e,...r)=>{const o=r.length?r[0]:e;return h.ctx&&l(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),p&&T(n,t)),e})):[],h.update(),p=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();o.intro&&z(n.$$.fragment),F(n,o.target,o.anchor),E()}$(d)}class B{$destroy(){P(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function O(t,n,e){const r=t.slice();return r[3]=n[e],r}function R(t){let n,e,r,o;return{c(){n=u("span"),e=u("img"),o=d(),e.src!==(r=t[3].award)&&h(e,"src",r),h(e,"height","64"),h(e,"width","64"),h(e,"alt","Award"),m(n,"left",t[3].x+"%"),m(n,"top",t[3].y+"%"),m(n,"transform","scale("+t[3].r+")"),h(n,"class","svelte-urp9ot")},m(t,r){l(t,n,r),c(n,e),c(n,o)},p(t,o){1&o&&e.src!==(r=t[3].award)&&h(e,"src",r),1&o&&m(n,"left",t[3].x+"%"),1&o&&m(n,"top",t[3].y+"%"),1&o&&m(n,"transform","scale("+t[3].r+")")},d(t){t&&i(n)}}}function q(n){let e,r=n[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=R(O(n,r,t));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=s("")},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,[n]){if(1&n){let a;for(r=t[0],a=0;a<r.length;a+=1){const c=O(t,r,a);o[a]?o[a].p(c,n):(o[a]=R(c),o[a].c(),o[a].m(e.parentNode,e))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i:t,o:t,d(t){!function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(o,t),t&&i(e)}}}function D(t,n,e){let{amount:r}=n,{awards:o}=n,a=new Array(r).fill().map(((t,n)=>({award:o[n%o.length],x:100*Math.random(),y:-20-100*Math.random(),r:.1+1*Math.random()}))).sort(((t,n)=>t.r-n.r));return y((()=>{let t;return function n(){t=requestAnimationFrame(n),e(0,a=a.map((t=>(t.y+=.7*t.r,t.y>120&&(t.y=-20),t))))}(),()=>cancelAnimationFrame(t)})),t.$$set=t=>{"amount"in t&&e(1,r=t.amount),"awards"in t&&e(2,o=t.awards)},[a,r,o]}class H extends B{constructor(t){super(),U(this,t,D,q,a,{amount:1,awards:2})}}function Z(t){let n;return{c(){n=s("Calculate")},m(t,e){l(t,n,e)},d(t){t&&i(n)}}}function G(t){let n;return{c(){n=s("Loading...")},m(t,e){l(t,n,e)},d(t){t&&i(n)}}}function V(t){let n,e,r,o,a,p,g,$=t[4](t[2])+"";return{c(){n=u("h1"),e=s("~"),r=s($),o=d(),a=u("a"),a.textContent="Copy link to this result",m(n,"margin-top","5px"),m(n,"margin-bottom","1px"),h(a,"href","#")},m(i,u){l(i,n,u),c(n,e),c(n,r),l(i,o,u),l(i,a,u),p||(g=f(a,"click",t[5]),p=!0)},p(t,n){4&n&&$!==($=t[4](t[2])+"")&&function(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}(r,$)},d(t){t&&i(n),t&&i(o),t&&i(a),p=!1,g()}}}function I(t){let n,e;return n=new H({props:{awards:t[3],amount:t[3].length}}),{c(){var t;(t=n.$$.fragment)&&t.c()},m(t,r){F(n,t,r),e=!0},p(t,e){const r={};8&e&&(r.awards=t[3]),8&e&&(r.amount=t[3].length),n.$set(r)},i(t){e||(z(n.$$.fragment,t),e=!0)},o(t){N(n.$$.fragment,t),e=!1},d(t){P(n,t)}}}function J(t){let n,e,o,a,s,m,g,$,y,w,b,x,C,_,v;function L(t,n){return t[0]?G:Z}let k=L(t),A=k(t),E=null!==t[2]&&V(t),M=t[3].length&&I(t);return{c(){n=u("div"),e=u("div"),o=u("h1"),o.textContent="Reddit Award Calculator",a=d(),s=u("input"),m=d(),g=u("button"),A.c(),y=d(),E&&E.c(),w=d(),M&&M.c(),b=d(),x=u("a"),x.innerHTML='<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>',h(s,"type","text"),h(s,"class","input svelte-zl8zdx"),h(s,"placeholder","Post or Comment URL"),g.disabled=$=!t[1],h(n,"class","container svelte-zl8zdx"),h(x,"href","https://github.com/docyx/reddit-award-calculator"),h(x,"aria-label","View source on GitHub")},m(r,i){l(r,n,i),c(n,e),c(e,o),c(e,a),c(e,s),p(s,t[1]),c(e,m),c(e,g),A.m(g,null),c(e,y),E&&E.m(e,null),l(r,w,i),M&&M.m(r,i),l(r,b,i),l(r,x,i),C=!0,_||(v=[f(s,"input",t[7]),f(g,"click",t[6])],_=!0)},p(t,[n]){2&n&&s.value!==t[1]&&p(s,t[1]),k!==(k=L(t))&&(A.d(1),A=k(t),A&&(A.c(),A.m(g,null))),(!C||2&n&&$!==($=!t[1]))&&(g.disabled=$),null!==t[2]?E?E.p(t,n):(E=V(t),E.c(),E.m(e,null)):E&&(E.d(1),E=null),t[3].length?M?(M.p(t,n),8&n&&z(M,1)):(M=I(t),M.c(),z(M,1),M.m(b.parentNode,b)):M&&(j={r:0,c:[],p:j},N(M,1,1,(()=>{M=null})),j.r||r(j.c),j=j.p)},i(t){C||(z(M),C=!0)},o(t){N(M),C=!1},d(t){t&&i(n),A.d(),E&&E.d(),t&&i(w),M&&M.d(t),t&&i(b),t&&i(x),_=!1,r(v)}}}function K(t,n,e){let r=!1,o="",a=null,c=[];y((()=>{let t=new URLSearchParams(window.location.search);t.get("url")&&(e(1,o=t.get("url")),l())}));const l=()=>{e(2,a=null),e(0,r=!0),e(3,c=[]),fetch((t=>t.split("?")[0].split("#")[0])(o)+".json").then((t=>t.json())).then((t=>{(t=>{let n;return n=1===t[1].data.children.length?t[1].data.children[0].data:t[0].data.children[0].data,n.all_awardings.map((t=>({amount:t.count,price:t.coin_price,icon:t.icon_url})))})(t).forEach((t=>{e(2,a+=.003*t.price*t.amount),c.push(t.icon)})),e(0,r=!1)})).catch((t=>{throw e(0,r=!1),t}))};return[r,o,a,c,t=>t.toLocaleString("en-US",{style:"currency",currency:"USD"}),()=>{navigator.clipboard.writeText("https://docyx.github.io/reddit-award-calculator?url="+o)},l,function(){o=this.value,e(1,o)}]}return new class extends B{constructor(t){super(),U(this,t,K,J,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
